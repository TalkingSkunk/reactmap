{"version":3,"sources":["DispatcherMap/Map/Map.js","DispatcherMap/Wrapper/Wrapper.js","Medic/Map/Map.js","Medic/Wrapper/Wrapper.js","App.js","index.js"],"names":["mapboxgl","workerClass","MapboxWorker","accessToken","socket","openSocket","Map","mapContainer","useRef","useState","lng","setLng","lat","setLat","zoom","setZoom","on","data","longitude","latitude","console","log","useEffect","map","container","current","style","center","addControl","NavigationControl","MapboxGeocoder","Marker","color","draggable","setLngLat","addTo","flyTo","getCenter","toFixed","getZoom","remove","Col","xs","md","className","ref","DispatcherMapWrapper","Container","Row","err","message","emit","navigator","geolocation","watchPosition","position","userCoordinates","parseFloat","coords","timestamp","enableHighAccuracy","alert","MedicWrapper","App","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ab44aa32.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\n\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport { Col } from \"react-bootstrap\";\n\n\nmapboxgl.workerClass = MapboxWorker;\nmapboxgl.accessToken = 'pk.eyJ1IjoidGFsa2luZ3NrdW5rIiwiYSI6ImNrbXYyYTAyNDAwejMydm52aThnZ3BvY3kifQ.ER8YYxoj5YJD_-8m1hNdxg';\n\n\nimport openSocket from 'socket.io-client';\nconst socket = openSocket('http://localhost:8080');\n\n\n\n  \n//    useEffect(() => {\n\n//     if(inRoom) {\n//       console.log('joining room');\n//       socket.emit('room', {room: 'test-room'});\n//     }\n\n//     return () => {\n//       if(inRoom) {\n//         console.log('leaving room');\n//         socket.emit('leave room', {\n//           room: 'test-room'\n//         })\n//       }\n//     }\n//   });\n\n//   useEffect(() => {\n//     socket.on('receive message', payload => {\n//       setMessageCount(messageCount + 1);\n//       document.title = `${messageCount} new messages have been emitted`;\n//     });\n//   }, []); //only re-run the effect if new message comes in\n\n//   const handleSetTheme = () => {\n//     let newTheme;\n//     (theme === 'light')\n//       ? newTheme = 'dark'\n//       : newTheme = 'light';\n//     console.log('new theme: ' + newTheme);\n//     setTheme(newTheme);\n//   }\n\n//   const handleInRoom = () => {\n//     inRoom\n//       ? setInRoom(false)\n//       : setInRoom(true);\n//   }\n\n//   const handleNewMessage = () => {\n//     console.log('emitting new message');\n//     socket.emit('new message', {\n//       room: 'test-room'\n//     });\n//     setMessageCount(messageCount + 1);\n//   }\n\n//   return (\n//     <div className={`App Theme-${theme}`}>\n//       <header className=\"App-header\">\n//         <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n//         <h1>\n//           {inRoom && `You Have Entered The Room` }\n//           {!inRoom && `Outside Room` }\n//         </h1>\n        \n//         <p>{messageCount} messages have been emitted</p>\n\n//         {inRoom &&\n//         <button onClick={() => handleNewMessage()}>\n//           Emit new message\n//         </button>\n//         }\n\n//         <button onClick={() => handleSetTheme()}>\n//           Toggle Theme\n//         </button>\n\n//         <button onClick={() => handleInRoom()}>\n//           {inRoom && `Leave Room` }\n//           {!inRoom && `Enter Room` }\n//         </button>\n\n//       </header>\n//     </div>\n//   );\n\n\n\n// This defines Map then specifies that it should be rendered in the <div> with the ID of app.\nconst Map = () => {\n\n\n    //The state stores the longitude, latitude, and zoom for the map. These values will all change as your user interacts with the map.\n    const mapContainer = useRef();\n    const [lng, setLng] = useState(-79.4718);\n    const [lat, setLat] = useState(43.6708);\n    const [zoom, setZoom] = useState(11.5);\n\n    socket.on('receiveMedicPosition', data => {\n        setLng(data.longitude)\n        setLat(data.latitude)\n        console.log('receiving from server', data)\n      });\n\n\n// The Mapbox map is initialized within React's Effect hook or the componentDidMount() lifecycle method, if you are using classes. Initializing your map here ensures that Mapbox GL JS will not try to render a map before React creates the element that contains the map. You also set the following options inside the map initialization: (\n    // The container option tells Mapbox GL JS to render the map inside a specific DOM element. Here, the app expects to receive a mapContainer ref. Later in this tutorial, you will assign the ref that is being referenced here to an HTML element that will act as the map container.\n    // The style option defines the style that the map will use (mapbox://styles/mapbox/streets-v11).\n    // The center and zoom options set the center coordinates and zoom level of the map using the values of lng, lat, and zoom that are stored in state.)\nuseEffect(() => {\n    const map = new mapboxgl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [lng, lat],\n        zoom: zoom\n    });\n    map.on('load', () => {\n        // Add navigation control (+/- top right, and directions on top left)\n        map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n        map.addControl(\n            new MapboxGeocoder({\n                accessToken: mapboxgl.accessToken,\n                mapboxgl: mapboxgl\n            }), 'bottom-left'\n        );\n        new mapboxgl.Marker({\n            color: \"#FFFFFF\",\n            draggable: false,\n            }).setLngLat([lng, lat])\n            .addTo(map)\n        map.flyTo({\n            center: [lng, lat],\n            zoom: 13\n        });\n\n    })\n\n\n\n        // getCenter(), a Mapbox GL JS method, to get the new longitude and latitude of the point at the center of the map.\n        // getZoom(), a Mapbox GL JS method, to determine the zoom level that the map is set to.\n        // toFixed(), a JavaScript method, to truncate the resulting floating point number to the specified number of digits.\n    \n    // // you need to create a function that stores the new latitude, longitude, and zoom that you get when a user interacts with the map. You will write a Mapbox GL JS map.on('move') function that sets the state to these new values when a user moves the map.\n    map.on('move', () => {\n        setLng(map.getCenter().lng.toFixed(4));\n        setLat(map.getCenter().lat.toFixed(4));\n        setZoom(map.getZoom().toFixed(2));\n    });\n \n\n\n     // Clean up on unmount\n     return () => map.remove();\n    }, []);\n\n  // The mapContainer ref specifies that map should be drawn to the HTML page in a new <div> element.\n  return (\n    <Col xs={12} md={6}>\n    {/* <div> to display the longitude, latitude, and zoom of the map. The return statement will look like this now: */}\n    <div className=\"sidebar\">\n        Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\n    </div>\n      <div className=\"map-container\" ref={mapContainer} />\n    </Col>\n  );\n}\n\nexport default Map;\n","import React from 'react';\nimport Map from '../Map/Map';\nimport { Container, Row } from \"react-bootstrap\";\n\n\n\nfunction DispatcherMapWrapper(){\n\n    return(\n        <Container>\n            <Row>\n                <Map />\n            </Row>\n        </Container>\n    )\n\n\n}\nexport default DispatcherMapWrapper;","import React, { useRef, useEffect, useState } from 'react';\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl-csp';\n\nimport MapboxWorker from 'worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker';\nimport * as MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport { Col } from \"react-bootstrap\";\n\nmapboxgl.workerClass = MapboxWorker;\nmapboxgl.accessToken = 'pk.eyJ1IjoidGFsa2luZ3NrdW5rIiwiYSI6ImNrbXYyYTAyNDAwejMydm52aThnZ3BvY3kifQ.ER8YYxoj5YJD_-8m1hNdxg';\n\n\nimport openSocket from 'socket.io-client';\nconst socket = openSocket('http://localhost:8080');\n\nsocket.on(\"connect_error\", (err) => {\n    console.log(`connect_error due to ${err.message}`);\n  });\n\nsocket.emit('lol', 'haha')\n\n\n\n// This defines Map then specifies that it should be rendered in the <div> with the ID of app.\nconst Map = () => {\n    //The state stores the longitude, latitude, and zoom for the map. These values will all change as your user interacts with the map.\n    const mapContainer = useRef();\n\n    const [lng, setLng] = useState(-79.47181);\n    const [lat, setLat] = useState(43.67081);\n    const [zoom, setZoom] = useState(11.5);\n\n    \n    \n    useEffect(() => {\n        socket.on('connect_failed', function() {\n            console.log(\"Sorry, there seems to be an issue with the connection!\");\n         })\n\n            const map = new mapboxgl.Map({\n                container: mapContainer.current,\n                style: 'mapbox://styles/mapbox/streets-v11',\n                center: [lng, lat],\n                zoom: zoom\n            });\n\n    \n        if (!navigator.geolocation){\n            return alert('Geolocation not supported by your browser :(')\n        }\n        navigator.geolocation.watchPosition(position => {\n            const userCoordinates = [parseFloat(position.coords.longitude.toFixed(5)), parseFloat(position.coords.latitude.toFixed(5))];\n            console.log('your location:', userCoordinates)\n            \n            socket.emit('medicPosition', {\n                longitude: userCoordinates[0],\n                latitude: userCoordinates[1],\n                timestamp: position.timestamp,\n            })\n            console.log('after socket')\n            new mapboxgl.Marker({\n                color: \"#FFFFFF\",\n                draggable: false,\n                }).setLngLat(userCoordinates)\n                .addTo(map)\n            map.flyTo({\n                center: userCoordinates,\n                zoom: 13\n            });\n    \n            setLng(userCoordinates[0])\n            setLat(userCoordinates[1])\n    \n            \n        }, err=>{console.log(err)}, {enableHighAccuracy: true});\n\n\n        map.on('load', () => {\n            // Add navigation control (+/- top right, and directions on top left)\n            map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n\n        })\n\n\n        // Clean up on unmount\n        return () => map.remove();\n    }, []);\n\n  // The mapContainer ref specifies that map should be drawn to the HTML page in a new <div> element.\n  return (\n    <Col xs={12} md={6}>\n    {/* <div> to display the longitude, latitude, and zoom of the map. The return statement will look like this now: */}\n    <div className=\"sidebar\">\n        Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\n    </div>\n      <div className=\"map-container\" ref={mapContainer} />\n    </Col>\n  );\n}\n\nexport default Map;\n","import React from 'react';\n\nimport Map from '../Map/Map';\n\nimport { Container, Row } from \"react-bootstrap\";\n\n\n\nfunction MedicWrapper(){\n\n    return(\n        <Container>\n            <Row>\n                <Map />\n            </Row>\n        </Container>\n    )\n\n\n}\nexport default MedicWrapper;","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport DispatcherMapWrapper from \"./DispatcherMap/Wrapper/Wrapper\";\nimport MedicWrapper from \"./Medic/Wrapper/Wrapper\";\n\n\n\n\nconst App = () => {\n\n  return (\n    <div>\n      <BrowserRouter>\n\n        <Route path=\"/dispatchermap\" exact component={DispatcherMapWrapper} />\n        \n        <Route path=\"/medical\" exact component={MedicWrapper} />\n        \n      </BrowserRouter>\n    </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}